<!-- bread_cum -->
<nav aria-label="breadcrumb" class="breadcrumb mb-0">
    <div class="container">
        <ol class="d-flex align-items-center mb-0 p-0">
            <li class="breadcrumb-item"><a [routerLink]="['/home']" class="text-success">Trang chủ</a></li>
            <li class="breadcrumb-item active" aria-current="page">Chi tiết sản phẩm</li>
        </ol>
    </div>
</nav>
<!-- body -->
<section class="py-4 osahan-main-body">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-6 col-lg-6 col-md-6">
                <div class="feedback-slides mb-2">
                    <div class="client-feedback">
                        <div class="carousel feedback">
                            <div class="slide">
                                <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                                    <ol class="carousel-indicators">
                                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                                    </ol>
                                    <div class="carousel-inner">
                                        <div class="carousel-item active">
                                            <img class="img-fluid mx-auto shadow-sm rounded d-block pt-image-manager__image" [src]="createImgPath(product.image_defaul)" alt="First slide">
                                        </div>
                                        <div class="carousel-item">
                                            <img class="img-fluid mx-auto shadow-sm rounded d-block pt-image-manager__image" [src]="createImgPath(product.image1)" alt="Second slide">
                                        </div>
                                        <div class="carousel-item">
                                            <img class="img-fluid mx-auto shadow-sm rounded d-block pt-image-manager__image" [src]="createImgPath(product.image2)" alt="Third slide">
                                        </div>
                                    </div>
                                    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pd-f d-flex align-items-center mb-3">
                    <a class="btn btn-warning p-3 rounded btn-block d-flex align-items-center justify-content-center mr-3 btn-lg" (click)="onBtnAddToCart(product)"><i class="icofont-plus m-0 mr-2"></i> Thêm vào giỏ hàng</a>
                    <a class="btn btn-success p-3 rounded btn-block d-flex align-items-center justify-content-center btn-lg m-0" [routerLink]="['/cart']" (click)="onBtnAddToCart(product)"><i class="icofont-cart m-0 mr-2"></i> Mua ngay</a>
                </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-lg-6 col-md-6">
                <div class="p-4 bg-white rounded shadow-sm">
                    <div class="pt-0">
                        <!-- name_product -->
                        <h2 class="font-weight-bold">{{product.name_product}}</h2>
                        <ul class="rating inline-ul">
                            <li *ngFor="let star of stars; let i = index">
                                <i class="text-success fa fa-lg" *ngIf="valueRate >= i + 0.5" [ngClass]="{'fa-star-half': valueRate >= i + 0.5 && valueRate < i + 1, 'fa-star': valueRate >= i + 1}"></i>
                            </li>
                        </ul>
                        <p class="font-weight-light text-dark m-0 d-flex align-items-center mt-3">
                            Giá : <b class="h6 text-dark m-0">{{product.price | number}}</b>
                        </p>
                    </div>
                    <div class="pt-2">
                        <div class="row">
                            <div class="col-6">
                                <p class="font-weight-bold m-0">Vận chuyển</p>
                                <p class="text-muted m-0">Miễn phí</p>
                            </div>
                        </div>
                    </div>
                    <div class="pt-2">
                        <div class="row">
                            <div class="col-6 border border-secondary">
                                <p class="font-weight-bold m-0">Thương hiệu:
                                    <span class="label-rating text-success ml-2 font-weight-bold">{{product.brand}}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="details">
                        <div class="pt-3 bg-white">
                            <div class="d-flex align-items-center">
                                <div class="ml-auto">
                                    <div class="cart-items-number d-flex" [formGroup]="quantityForm">
                                        <button type='button' class='qtyminus btn btn-success btn-sm' (click)="decreaseQuantity()">
                                            <i class="icofont-minus"></i>
                                        </button>
                                        <input type='number' class='qty form-control' [formControlName]="'quantityOfCart'"/>
                                        <button type='button' class='qtyplus btn btn-success btn-sm' (click)="increaseQuantity(product.quantity)">
                                            <i class="icofont-plus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 pt-3">
                                <p class="font-weight-bold mb-2">Mô tả sản phẩm</p>
                                <p class="text-muted small mb-0">{{product.description}}</p>
                            </div>
                            <div class="col-md-6 pt-3">
                                <p class="font-weight-bold mb-2">Sản phẩm có sẳn</p>
                                <p class="text-muted small mb-0">{{product.quantity}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section>
    <div class="container task-list bg-white mb-2">
        <div class="row">
            <div class="col-lg-12">
                <h4>Thông tin cửa hàng</h4>
            </div>
            <div class="col-lg-12">
                <div class="panel panel-white post panel-shadow">
                    <div class="post-heading">
                        <div class="pull-left image mb-3">
                            <img [src]="createImgPath(agencyDetail.image)" class="rounded-circle avatar pt-image-manager__image1" alt="user profile image">
                        </div>
                        <div class="row">
                            <div class="col-12 d-flex">
                                <h5>{{agencyDetail.fullname}}</h5>
                            </div>
                            <p class="col-12 d-flex h5">
                                {{agencyDetail.phone}}
                            </p>
                            <p class="col-12 d-flex h5">
                                {{agencyDetail.email}}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section>
    <div class="container task-list bg-white mb-2">
        <div class="row">
            <div class="col-lg-12">
                <h4>Đánh giá sản phẩm</h4>
            </div>
            <ng-container *ngIf="listRate['data'].length > 0; else noRate">
                <ng-container *ngFor="let rate of listRate['data'] | paginate: {itemsPerPage: pagination.size, currentPage: pagination.page, totalItems: pagination.length}">
                    <div class="col-sm-8">
                        <div class="panel panel-white post panel-shadow">
                            <div class="post-heading">
                                <div class="pull-left meta">
                                    <div class="title h5">
                                        <a><b>Khách hàng</b></a>
                                    </div>
                                    <ul class="rating inline-ul">
                                        <li *ngFor="let star of stars; let i = index">
                                            <i class="text-success fa" *ngIf="rate.rate >= i + 0.5" [ngClass]="{'fa-star-half': rate.rate >= i + 0.5 && rate.rate < i + 1, 'fa-star': rate.rate >= i + 1}"></i>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="panel panel-white post panel-shadow">
                            <div class="post-heading">
                                <div class="pull-left image mb-3">
                                    <img src="https://scr.vn/wp-content/uploads/2020/07/Avatar-Facebook-tr%E1%BA%AFng.jpg" class="rounded-circle avatar pt-image-manager__image1" alt="user profile image">
                                </div>
                                <div class="row">
                                    <p class="col-12 d-flex">
                                        {{rate.date | date}}
                                    </p>
                                    <p class="col-12 d-flex">
                                        {{rate.content}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
            <ng-template #noRate>
                <p class="text-dark">Không có thông tin đánh giá sản phẩm</p>
            </ng-template>
        </div>
        <div class="row justify-content-center">
            <pagination-controls class="my-pagination" previousLabel="Trước" nextLabel="Tiếp" (pageChange)="changePage(pagination.page = $event)"></pagination-controls>
        </div>
    </div>
</section>